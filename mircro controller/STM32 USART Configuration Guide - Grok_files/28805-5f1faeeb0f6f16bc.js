!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="5665bc1c-4245-45ef-88d5-24e4dc82a376",e._sentryDebugIdIdentifier="sentry-dbid-5665bc1c-4245-45ef-88d5-24e4dc82a376")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[28805],{42423:(e,t,n)=>{n.d(t,{a:()=>H,s:()=>P});var r=n(79342),a=n(8646),s=n(92539),i=n(68332),o=n(75500),l=n(41320),c=n(35181),d=n(24734),u=n(61312),m=n(11492),p=n(23329),f=n(20337),x=n(31643),v=n(35021),h=n(35008),g=n(1031),y=n(40938),b=n(82059),w=n(35299),j=n(58027),N=n(74995),I=n(88382),S=n(65146),k=n(14908),_=n(43654),A=n(30388),C=n(65761),T=n(56691),E=n(47127);let M=[],R=()=>(0,r.jsxs)("div",{className:"relative w-8 h-8 flex items-center justify-center filter blur-[1.5px]",children:[(0,r.jsx)(w.P.div,{className:"absolute w-4 h-4 rounded-full bg-opacity-90 shadow-lg",style:{background:"radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0) 70%)",boxShadow:"inset 2px 2px 4px rgba(255, 255, 255, 0.5), inset -2px -2px 4px rgba(0, 0, 0, 0.3)"},animate:{background:["radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8) 0%, rgba(139, 92, 246, 0.8) 50%, rgba(236, 72, 153, 0.8) 100%)","radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8) 0%, rgba(59, 130, 246, 0.8) 50%, rgba(139, 92, 246, 0.8) 100%)","radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8) 0%, rgba(139, 92, 246, 0.8) 50%, rgba(59, 130, 246, 0.8) 100%)","radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8) 0%, rgba(139, 92, 246, 0.8) 50%, rgba(236, 72, 153, 0.8) 100%)"],scale:[1,1.1,1]},transition:{duration:6,ease:"linear",repeat:1/0,times:[0,.33,.66,1]}}),(0,r.jsx)("div",{className:"absolute w-0.5 h-0.5 rounded-full bg-white opacity-5 blur-[2px]",style:{top:"35%",left:"35%"}}),(0,r.jsx)(w.P.div,{className:"absolute w-4 h-4 rounded-full",style:{border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"inset 0 0 5px rgba(255, 255, 255, 0.5)"},animate:{opacity:[.7,.5,.7]},transition:{duration:3,ease:"easeInOut",repeat:1/0}})]});function P(e){let{responseId:t,memoryReferences:n,className:a}=e,{t:i}=(0,S.Bd)("base"),c=(0,o.h)(),{client:d}=(0,f.useStatsigClient)(),u=(0,s.aP)(N.A("sidePanelContent")),m=(0,s.aP)(N.A("setSidePanelContent")),p=(0,l.W)(),x=(0,I.useMemo)(()=>{if((null==u?void 0:u.type)!=="memoryReferences")return!1;let e=u.data.memoryReferences.map(e=>e.conversationId);return n.every((t,n)=>t.conversationId===e[n])&&n.length===e.length},[u,n]),v=(0,I.useCallback)(()=>{if(x)return void m(void 0);d.logEvent("open_memory_reference_list",t),m({type:"memoryReferences",data:{responseId:t,memoryReferences:n}})},[x,n,t,m,d]);return 0===n.length?null:(0,r.jsx)(T.gx,{"aria-label":i("response-action.referenced-conversations","Referenced Conversations"),tooltipContent:(0,r.jsx)("p",{children:i("response-action.referenced-conversations","Referenced Conversations")}),tooltipContentProps:{side:"bottom"},variant:"ghostSecondary",size:p?"iconMd":"iconSm",rounded:!0,onClick:v,className:a,children:(0,r.jsx)(E.p,{children:c.SHOW_ORB_ICON_MEMORY?(0,r.jsx)(R,{}):x?(0,r.jsx)(_.vP,{className:"size-4 text-primary"}):(0,r.jsx)(_.vP,{className:"size-4"})},x?"selected":"not-selected")})}function O(e){let{responseId:t,memoryConversationId:n,onSettled:a,onlyShowOnHover:i}=e,{t:o}=(0,S.Bd)("base"),{client:l}=(0,f.useStatsigClient)(),c=(0,x.jE)(),u=(0,s.aP)(N.A("conversationId")),p=(0,d.K)(),[h,g]=(0,I.useState)(!1),y=(0,I.useCallback)(e=>{e.stopPropagation(),l.logEvent("begin_forget_memory_reference",t,{responseId:t,memoryConversationId:n,threadConversationId:null!=u?u:""}),g(!0);let r=setTimeout(()=>{g(!1)},3e3);return()=>clearTimeout(r)},[n,t,u,l]),{mutate:b,isPending:w}=(0,x.n_)({mutationFn:()=>m.Pt.chatDeleteMemory({conversationIds:[n]}),onError:e=>{g(!1),p(e,o("memory.failed-to-delete-memory","Failed to delete memory"))},onSettled:()=>{g(!1),c.invalidateQueries({queryKey:["memories",t]}).catch(()=>{k.oR.error(o("memory.failed-to-refresh-memory-list","Failed to refresh memory list"))}),null==a||a()}});return(0,r.jsx)(r.Fragment,{children:h?(0,r.jsx)(T.$n,{onClick:e=>{e.stopPropagation(),l.logEvent("forget_memory_reference",t,{responseId:t,memoryConversationId:n,threadConversationId:null!=u?u:""}),b()},variant:"destructive",rounded:!0,children:w?(0,r.jsx)(v.A,{className:"size-4 animate-spin"}):o("Confirm","Confirm")}):(0,r.jsx)(T.$n,{className:i?"opacity-0 group-hover:opacity-100 transition-opacity duration-200":"",onClick:y,variant:"secondary",rounded:!0,children:o("Forget","Forget")})})}function B(e){let{responseId:t,memory:n,onClick:a}=e,{convoId:s,convoSummary:i}=n,l=(0,p.w)(N.A("fetchGetConversation")),d=(0,o.h)(),m=(0,I.useCallback)(e=>{e.stopPropagation(),a()},[a]),{data:f,isLoading:x,error:v}=(0,c.v)(s?l(s):void 0),h=(0,I.useMemo)(()=>null==i?void 0:i.split("\n").map(e=>e.replace(/^[- ]*/,"")).join("\n"),[i]);return x||v||!f?null:(0,r.jsx)("div",{className:(0,u.cn)("block text-base hover:bg-card-hover rounded-xl focus:outline-none focus-within:outline-none focus-visible:ring-1 focus-visible:ring-ring w-full cursor-pointer"),onClick:m,children:(0,r.jsxs)("div",{className:"flex flex-row items-center justify-between gap-4 p-4 group",children:[(0,r.jsxs)("div",{className:(0,u.cn)("flex flex-col gap-2 max-w-[400px]",d.SHOW_MEMORY_SUMMARY&&"w-full max-w-[600px]"),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm text-primary",children:f.title||"Untitled Memory"}),(0,r.jsx)("span",{className:"text-secondary text-sm",children:"  â€¢  "}),(0,r.jsx)(C.M,{conversation:f})]}),d.SHOW_MEMORY_SUMMARY&&(0,r.jsx)("div",{className:"max-h-[100px] overflow-hidden pb-4 -mb-4 fade-mask-bottom",children:(0,r.jsx)("p",{className:"mt-1 text-xs text-primary break-words",children:h})})]}),!d.SHOW_MEMORY_SUMMARY&&(0,r.jsx)(O,{responseId:t,memoryConversationId:s,onlyShowOnHover:!0})]})})}function L(e){let{responseId:t,memory:n,onOpen:s,onBack:i}=e,{convoId:o,convoSummary:l}=n,d=(0,p.w)(N.A("fetchGetConversation")),{data:m,isLoading:f,error:x}=(0,c.v)(o?d(o):void 0),v=(0,I.useMemo)(()=>null==l?void 0:l.split("\n").map(e=>e.replace(/^[- ]*/,"")).join("\n\n"),[l]);return f||x||!m?null:(0,r.jsxs)("div",{className:(0,u.cn)("p-4 max-w-[600px]"),children:[(0,r.jsxs)("div",{className:"flex flex-row items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,r.jsx)(T.$n,{variant:"ghostSecondary",size:"iconSm",onClick:()=>i(),children:(0,r.jsx)(h.A,{className:"size-4"})}),(0,r.jsx)("div",{className:"group cursor-pointer relative text-sm",onClick:()=>s(),children:(0,r.jsxs)("span",{className:"group-hover:underline flex flex-row items-center gap-1",children:[(0,r.jsx)("span",{className:"line-clamp-1",children:m.title||"Untitled Memory"}),(0,r.jsx)(g.A,{size:22,className:"text-primary rounded-full bg-card p-1 flex-shrink-0"})]})})]}),(0,r.jsx)(O,{responseId:t,memoryConversationId:o,onSettled:()=>{i()}})]}),(0,r.jsx)("div",{className:"p-4 prose dark:prose-invert text-sm",children:(0,r.jsx)(a.Ad,{sender:"",webSearchResults:M,xposts:M,children:null!=v?v:""})})]})}function H(e){let{responseId:t,memoryReferences:n}=e,{t:a}=(0,S.Bd)("base"),s=(0,o.h)(),{routeToConversation:l}=(0,i.o)(),{client:c}=(0,f.useStatsigClient)(),{data:d,isLoading:p,error:v,refetch:h}=(0,x.IT)({queryKey:["memories",t],queryFn:()=>{let e=n.map(e=>e.conversationId).filter(e=>void 0!==e);return m.Pt.chatGetMemory({body:{conversationIds:e}})}}),[g,N]=(0,I.useState)(null),k=(0,I.useCallback)(e=>{var n;c.logEvent("open_memory_reference",t,{memoryConversationId:null!=(n=e.convoId)?n:""}),s.OPEN_MEMORY_IN_NEW_TAB?window.open("/chat/".concat(e.convoId),"_blank"):l(e.convoId)},[l,c,s.OPEN_MEMORY_IN_NEW_TAB,t]);if(p)return(0,r.jsx)("div",{className:"flex flex-col items-center px-4 pt-1 pb-2 gap-2",children:(0,r.jsx)(A.d,{})});if(v)return(0,r.jsx)("div",{className:"flex flex-col items-center px-4 pt-1 pb-2 gap-2 w-full",children:(0,r.jsx)(w.P.div,{initial:{translateY:5,opacity:0},animate:{translateY:0,opacity:1},exit:{translateY:5,opacity:0},className:(0,u.cn)("w-fit","p-4 bg-card","shadow-sm","border border-input-border rounded-2xl","ml-4 md:mx-4"),children:(0,r.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,r.jsx)(y.A,{className:(0,u.cn)("h-5 w-5 flex-shrink-0")}),(0,r.jsx)("div",{className:"flex-1 max-w-96",children:(0,r.jsx)("div",{className:"text-primary text-sm",children:a("memory.error","Failed to load memories.")})}),(0,r.jsxs)(T.$n,{variant:"secondary",rounded:!0,onClick:()=>{h()},children:[(0,r.jsx)(b.A,{className:"mr-2 h-4 w-4"}),a("Retry","Retry")]})]})})});if(!d||!d.memories)return(0,r.jsx)("div",{className:"flex flex-col items-center px-4 pt-1 pb-2 gap-2",children:(0,r.jsx)("p",{className:"text-sm text-primary",children:a("memory.no-memories","No memories to display.")})});let _=d.memories;return s.SHOW_MEMORY_SUMMARY?(0,r.jsx)(j.N,{children:(0,r.jsx)("div",{className:"flex flex-row",children:g?(0,r.jsx)(w.P.div,{initial:{x:200,opacity:0},animate:{x:0,opacity:1},exit:{x:200,opacity:0},transition:{duration:.1},className:"w-full",children:(0,r.jsx)(L,{responseId:t,memory:g,onOpen:()=>k(g),onBack:()=>N(null)})},"memory-detail"):(0,r.jsx)(w.P.div,{initial:{x:-200,opacity:0},animate:{x:0,opacity:1},exit:{x:-200,opacity:0},transition:{duration:.1},className:"flex flex-col items-center px-4 pt-1 pb-2 gap-2 max-w-full",children:_.length>0?null==_?void 0:_.map(e=>(0,r.jsx)(B,{responseId:t,memory:e,onClick:()=>N(null!=e?e:null)},e.convoId)):(0,r.jsx)("p",{className:"text-sm text-primary",children:a("memory.no-memories","No memories to display.")})},"memory-list")})}):(0,r.jsx)("div",{className:"flex flex-col items-center px-4 pt-1 pb-2 gap-2 max-w-full",children:_.length>0?null==_?void 0:_.map(e=>(0,r.jsx)(B,{responseId:t,memory:e,onClick:()=>k(e)},e.convoId)):(0,r.jsx)("p",{className:"text-sm text-primary",children:a("memory.no-memories","No memories to display.")})})}},46741:(e,t,n)=>{n.d(t,{Ok:()=>o,gI:()=>i,yo:()=>s});var r=n(11492),a=n(17703);async function s(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.Pt;return await n.chatGetArtifactById({artifactId:e,body:{conversationId:t}})}async function i(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.Pt;try{if((await s.chatUpdateArtifact({artifactId:e,body:{artifactVersionId:t,fullArtifact:n}})).artifactVersionId)return!0}catch(e){return(0,a.vV)("artifact-saveArtifactVersion",e),!1}}async function o(e){let{artifactId:t,artifactVersionId:n,isInline:s}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.Pt;try{if((await i.chatUpdateArtifactInlineStatus({artifactId:t,body:{artifactVersionId:n,inlineStatus:s?"SHOW_INLINE_ARTIFACT_INLINE_STATUS":"SHOW_SIDEBAR_ARTIFACT_INLINE_STATUS"}})).artifactVersionId)return!0}catch(e){return(0,a.vV)("artifact-setArtifactInline",e),!1}}},61495:(e,t,n)=>{n.d(t,{P:()=>l});var r=n(79342),a=n(61312),s=n(92118),i=n(8648),o=n(88382);let l=(0,o.forwardRef)((e,t)=>{let{className:n,onScroll:l,children:d,stickToBottom:u,onUnhookScroll:m,onShowScrollButton:p,scrollingToBottom:f,isStreaming:x}=e,v=(0,o.useRef)(null),h=(0,o.useRef)(null),g=(0,o.useCallback)(()=>{if(!v.current)return;h.current&&cancelAnimationFrame(h.current);let e=v.current,t=e.scrollTop,n=e.scrollHeight-e.clientHeight,r=n-t;if(r<=0)return;let a=null,s=i=>{if(!e)return;a||(a=i);let o=Math.min((i-a)/400,1);e.scrollTop=t+r*(1-(1-o)*(1-o)),o<1?h.current=requestAnimationFrame(s):(e.scrollTop=n,h.current=null)};h.current=requestAnimationFrame(s)},[]);(0,o.useEffect)(()=>{f?g():h.current&&cancelAnimationFrame(h.current)},[g,f]);let{scrollY:y}=(0,s.L)({container:v});(0,i.L)(y,"change",e=>{if(!v.current)return;let t=c(v.current);p(!u&&!t);let n=y.getPrevious();void 0!==n&&("up"!=(e-n>0?"down":"up")||t?t&&(null==m||m({scrollToBottomValue:!1,stickToBottomValue:u})):(h.current&&cancelAnimationFrame(h.current),null==m||m({scrollToBottomValue:!1,stickToBottomValue:!1}))),null==l||l(t)});let b=(0,o.useCallback)(e=>{v.current&&v.current.scrollTo({top:v.current.scrollHeight,behavior:e})},[]);return(0,o.useEffect)(()=>{if(!v.current)return;let e=new MutationObserver(()=>{if(!v.current)return;let e=c(v.current);p(!u&&!e),x&&u&&!e&&g()});return e.observe(v.current,{childList:!0,subtree:!0}),()=>{e.disconnect()}},[x,u,p,g]),(0,o.useImperativeHandle)(t,()=>{var e,t,n;return{scrollToBottom:b,scrollTo:e=>{var t;return null==(t=v.current)?void 0:t.scrollTo(e)},el:v.current,scrollHeight:null==(e=v.current)?void 0:e.scrollHeight,scrollTop:null==(t=v.current)?void 0:t.scrollTop,clientHeight:null==(n=v.current)?void 0:n.clientHeight}}),(0,r.jsx)("div",{ref:v,className:(0,a.cn)("w-full h-full overflow-y-auto overflow-x-hidden scrollbar-gutter-stable",n),style:{overflowAnchor:"none"},children:d})});function c(e){return e.scrollHeight<e.scrollTop+e.clientHeight+5}},65761:(e,t,n)=>{n.d(t,{M:()=>d,P:()=>c});var r=n(79342),a=n(93649),s=n(87206),i=n(61312),o=n(62376),l=n(88382);function c(e){let t=new Date(e),n=new Date,r=(n.getTime()-t.getTime())/864e5;return r<1?(0,s.B)((0,o.a)(e,n,{locale:a.A.language})):r<7?(0,s.B)((0,o.a)(e,n,{unit:"day",locale:a.A.language})):t.getFullYear()===n.getFullYear()?t.toLocaleDateString(a.A.language,{day:"numeric",month:"short"}):t.toLocaleDateString(a.A.language,{day:"numeric",month:"short",year:"numeric"})}function d(e){let{conversation:t}=e,n=(0,l.useMemo)(()=>{if(t.modifyTime||t.createTime)return c(t.modifyTime||t.createTime)},[t.modifyTime,t.createTime]);return n?(0,r.jsx)("span",{className:(0,i.cn)("text-secondary text-sm"),children:n}):null}},69458:(e,t,n)=>{n.d(t,{B4:()=>d,cY:()=>f,cy:()=>a,fH:()=>i,gq:()=>o,j$:()=>h,o0:()=>p,rv:()=>u,s3:()=>g});var r=n(88382);let a=e=>{let{iframeRef:t}=e,[n,a]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=()=>a(!0);return t.current&&t.current.addEventListener("load",()=>a(!0)),()=>{var n;null==(n=t.current)||n.removeEventListener("load",e)}},[t.current]),{isIframeReady:n,injectHTML:(0,r.useCallback)(e=>{var n;(null==(n=t.current)?void 0:n.contentWindow)&&t.current.contentWindow.postMessage({type:"html",html:e},"https://artifacts.grokusercontent.com")},[])}},s=["text/x-python","text/python"];function i(e){var t;return s.includes(null!=(t=e.contentType)?t:"")}function o(e){var t;return i(e)&&(null==(t=e.content)?void 0:t.includes("import pygame"))}let l=["text/x-tex","text/x-latex","text/latex","text/x"],c=["text/cpp","text/c","text/x-c++src","text/javascript","text/typescript","text/bash",...l,"text/x-sh",...s];function d(e){var t;return!o(e)&&c.includes(null!=(t=e.contentType)?t:"")}function u(e){var t;return l.includes(null!=(t=e.contentType)?t:"")}let m=["text/html"];function p(e){return m.includes(x(e))}function f(e){var t;let n=x(e);return null!=(t=n.split("/")[1])?t:n}function x(e){var t,n;return null!=(n=null==(t=e.contentType)?void 0:t.split(";")[0])?n:""}let v=["text/plain","text/markdown","text/html"];function h(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return!!(t.ENABLE_LATEX_PREVIEW&&n&&u(e))||v.includes(x(e))}function g(e){var t,n;return null!=(n=null==(t=e.contentType)?void 0:t.includes("report"))&&n}},83612:(e,t,n)=>{n.d(t,{D4:()=>o,TQ:()=>c,sf:()=>l});var r=n(38541),a=n.n(r),s=n(4890),i=n(17823);let o=(0,s.v)(e=>({mode:"code",setMode:t=>e({mode:t}),artifactsByConversationId:{},isRefreshing:!1,refresh:()=>{e({isRefreshing:!0}),setTimeout(()=>e({isRefreshing:!1}),100)},upsertArtifact:(t,n)=>{t.id&&t.timestamp&&e(e=>{var r,s,i;return{artifactsByConversationId:{...e.artifactsByConversationId,[n]:{...null!=(s=e.artifactsByConversationId[n])?s:{},[t.id]:a().orderBy(a().uniqBy([t,...null!=(i=null==(r=e.artifactsByConversationId[n])?void 0:r[t.id])?i:[]],"identifier"),"timestamp","asc")}}}})}})),l=(0,s.v)()((0,i.Zr)(e=>({inlineSettings:{},setInlineSetting:(t,n)=>{e(e=>({inlineSettings:{...e.inlineSettings,[t]:{updateTime:Date.now(),isInline:n}}}))}}),{name:"inline-artifacts"})),c=(0,s.v)()((0,i.Zr)(e=>({edits:{},saveEdit:(t,n,r)=>{e(e=>{var a,s,i,o;let l=null!=(i=null==(s=e.edits[t])||null==(a=s[n])?void 0:a.lastSyncTime)?i:0,c={editTime:Date.now(),lastSyncTime:l,content:r};return{edits:{...e.edits,[t]:{...null!=(o=e.edits[t])?o:{},[n]:c}}}})},updateLastSyncTime:(t,n)=>{e(e=>{var r,a;let s=null==(r=e.edits[t])?void 0:r[n];if(!s)return{};let i={...s,lastSynctime:Date.now()};return{edits:{...e.edits,[t]:{...null!=(a=e.edits[t])?a:{},[n]:i}}}})}}),{name:"artifacts-edits"}))},89003:(e,t,n)=>{n.d(t,{Xs:()=>k,vO:()=>C,Zv:()=>T});var r=n(79342),a=n(92539),s=n(42557),i=n(56691),o=n(68332),l=n(88382);let c={};function d(e,t){let n=(0,l.useRef)("function"==typeof t?t():t).current,[r,a]=(0,l.useState)(()=>{try{let t=window.sessionStorage.getItem(e);return t?JSON.parse(t):n}catch(e){return console.error("Error parsing sessionStorage value:",e),n}});return(0,l.useEffect)(()=>{let t=e=>{a(e)};return c[e]||(c[e]=[]),c[e].push(t),()=>{c[e]&&(c[e]=c[e].filter(e=>e!==t))}},[e]),(0,l.useEffect)(()=>{let t=t=>{if(t.key===e&&t.storageArea===window.sessionStorage)if(null!==t.newValue)try{a(JSON.parse(t.newValue))}catch(e){console.error("Error parsing storage event value:",e)}else a(n)};return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}},[e,n]),[r,t=>{try{let n="function"==typeof t?t(r):t;window.sessionStorage.setItem(e,JSON.stringify(n)),a(n),c[e]&&c[e].forEach(e=>e(n))}catch(e){console.error("Error setting sessionStorage value:",e)}}]}var u=n(93016),m=n(48992),p=n(61312),f=n(11492),x=n(43893),v=n(31643),h=n(38541),g=n.n(h),y=n(42283),b=n(74995),w=n(65146);let j="HcydF4kDI5",N=["QHguYWk=","QHRlYWNoeC5haQ=="],I=new Set(["amRsb3Zlc3RoaXNAZ21haWwuY29t","bWF0dGJzcmlAZ21haWwuY29t"]);function S(){let{user:e}=(0,s.wV)(),[t]=d(j,!1),n=null==e?void 0:e.email;return!!n&&!!(I.has(n)||N.some(e=>n.endsWith(atob(e))))&&!t}function k(){let{t:e}=(0,w.Bd)("base"),[,t]=d(j,!1),{isChatPage:n,isSharePage:a,pageData:s}=(0,o.o)();return S()?(0,r.jsxs)("div",{className:"absolute top-0 right-1/2 translate-x-1/2 z-50 flex items-center gap-0",children:[n&&(0,r.jsx)(A,{}),a&&(null==s?void 0:s.shareLinkId)&&(0,r.jsx)(_,{shareLinkId:s.shareLinkId}),(0,r.jsx)(i.$n,{variant:"ghost",size:"iconSm",onClick:()=>{t(!0)},"aria-label":e("debug-menu-close.label","Close"),children:(0,r.jsx)(y.A,{size:10})})]}):null}function _(e){let{shareLinkId:t}=e,{data:n}=(0,v.IT)({queryKey:["share",t],queryFn:()=>(0,u.u)(t,f.Pt)});return n?(0,r.jsxs)("div",{className:"text-red-600 font-normal text-xs flex flex-row gap-1",children:[(0,r.jsx)("span",{children:"convo id: "}),(0,r.jsx)("span",{className:"block",children:null==n?void 0:n.conversation.conversationId})]}):null}function A(){let e=(0,a.aP)(b.A("lastMessageId")),t=(0,x.A3)(b.A("byId"));return(0,r.jsx)(i.$n,{className:"text-red-600 font-normal",variant:"text",size:"none",onClick:()=>{var n=e,r=t;let a=T(n,r),s=new Blob([null!=a?a:JSON.stringify({message:"No data to show"})],{type:"application/json"});if(s){let e=window.URL.createObjectURL(s);window.open(e,"_blank")}},children:"export"})}function C(e){let{response:t}=e;return S()?(0,r.jsxs)("div",{className:(0,p.cn)("absolute text-red-600 font-normal text-xs bottom-[2.5rem]","opacity-0 group-focus-within:opacity-100 group-hover:opacity-100 transition-opacity","flex flex-row gap-1"),children:[(0,r.jsx)("span",{children:"res id: "}),(0,r.jsx)("span",{className:"block",children:t.responseId})]}):null}function T(e,t){if(!e)return void console.error("No last message id");let n=t[e];return n?JSON.stringify((0,m.Cg)(n,t).map(e=>t[e]).map(e=>({role:"human"===e.sender?"user":"assistant",content:e.message,...g().pick(e,"thinkingTrace","steps","generatedImageUrls","metadata")})),null,2):void console.error("No response for last message id",e)}},93016:(e,t,n)=>{n.d(t,{u:()=>s});var r=n(33473),a=n(11492);async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.Pt,n=arguments.length>2?arguments[2]:void 0,s=await t.chatGetShareLink({shareLinkId:e},{headers:n});if(!s.conversation)throw Error("Conversation not found.");if(!s.responses||0===s.responses.length)throw Error("No responses in conversation.");let i={...s.conversation,personaId:(0,r._c)(s.conversation.systemPromptName)};return{responses:s.responses.map(e=>({...e,conversationId:i.conversationId,state:"closed"})),conversation:i}}}}]);